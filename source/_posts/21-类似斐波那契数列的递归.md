---
title: 21-类似斐波那契数列的递归
date: 2022-11-21 09:52:30
tags:
categories:
---

## 收获知识点
用于将递推式O(n)转化为O(logn)的方法

在递归式仅有一种情况时，如：

`f[n] = a*f[n-1] + b*f[n-2]...`

可以写成矩阵乘法形式：

`f[n],f[n-1] = f[n-1],f[n-2] * A`

`f[n],f[n-1] = f[1],f[0] * A^(n-1)`

通用形式：
`f[n],f[n-1]... = f[n-i],f[n-i-1]... * A^(n-i)`

其中，A为i阶矩阵，后面乘的矩阵是A的n-i次方。

## 矩阵乘法
按部就班

## 快速幂
维护两个变量，res和t，t每次都自乘，注意循环条件是n>0，res每次都乘t，n每次都右移一位。
```go
t := A
res := i //单位矩阵
for n > 0 { //注意条件
    if n&1 != 0 {
        res = res * t
    }
    t = t * t
    n >>= 1
}
```
## 变种
01字符串：任意0左边都有1的字符串合法，问长度N的字符串有几种情况

贴瓷砖：有2\*1的瓷砖，问2\*n的墙有几种铺法